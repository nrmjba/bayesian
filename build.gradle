ext {
    githubProjectName = 'bayesian'
    dataDir = "$rootDir/data"

    versions = [
            jersey: '1.17',
            javasimon: '3.3.0',
            slf4j: '1.7.1'
    ]
}

buildscript {
    apply from: file('gradle/buildscript.gradle'), to: buildscript
}

apply from: file('gradle/data-prep.gradle')
apply from: file('gradle/convention.gradle')
apply from: file('gradle/check.gradle')
apply from: file('gradle/license.gradle')

subprojects {
    group = "org.lenition.$githubProjectName"
}

project(':client') { }

project(':server') {

    apply plugin: 'gae'
    sourceCompatibility = JavaVersion.VERSION_1_7

    dependencies {
        gaeSdk 'com.google.appengine:appengine-java-sdk:1.8.3'

        // see compatibile versions at https://code.google.com/p/googleappengine/wiki/WillItPlayInJava#Jersey
        compile "com.sun.jersey:jersey-servlet:$versions.jersey"
        compile "com.sun.jersey:jersey-core:$versions.jersey"
        compile "com.sun.jersey:jersey-server:$versions.jersey"
        compile "com.sun.jersey:jersey-json:$versions.jersey"
        compile "com.sun.jersey:jersey-grizzly2:$versions.jersey"
        compile "com.sun.jersey:jersey-grizzly2:$versions.jersey"

        compile 'com.google.code.gson:gson:2.2.4'
        compile 'org.apache.commons:commons-lang3:3.1'

        providedCompile 'javax.servlet:servlet-api:2.5'

        testCompile 'junit:junit:4.11'
    }

    gae {
        optimizeWar = true     // see https://github.com/musketyr/gradle-fatjar-plugin/
        downloadSdk = true
        appcfg {
            email = 'seth.rylan@gmail.com'
            passIn = true

            logs {
                severity = 1
                outputFile = file('gae.log')
            }

            app {
                id = 'bayesian'
            }
        }
    }
}
